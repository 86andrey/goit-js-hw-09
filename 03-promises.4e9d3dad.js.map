{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAaC,SAASC,cAAc,SACpCC,EAAQF,SAASC,cAAc,qBAC/BE,EAAOH,SAASC,cAAc,oBAC9BG,EAASJ,SAASC,cAAc,sBAChCI,EAAML,SAASC,cAAc,UA4CnC,SAASK,EAAgBC,GAEvBV,EAAAW,OAAOC,QAAQF,GAEjB,SAASG,EAAeC,GAEtBd,EAAAW,OAAOI,QAAQD,GAhDjBZ,EAAWc,iBAAiB,UAE5B,SAAsBC,GACpBA,EAAMC,iBACNV,EAAIW,UAAW,EACf,MAAMC,EAAYC,OAAOf,EAAKgB,OAC9B,IAAIC,EAAW,EACXC,EAAaH,OAAOhB,EAAMiB,OAC1BG,EAAaJ,OAAOhB,EAAMiB,OAE9B,MAAMI,EAAaC,aAAY,KAC7BJ,GAAY,EAERhB,EAAOe,MAAQC,EACjBK,cAAcF,IAcpB,SAAuBH,EAAUM,EAAOJ,GACtC,MAAMK,EAAgBC,KAAKC,SAAW,GAEtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACLN,EACFI,EAAQ,uBAAqBX,QAAiBM,OAE5CM,EAAK,sBAAoBZ,QAAeM,SAE3CJ,MApBHY,CAAcd,EAAUC,EAAYC,GACjCa,KAAK7B,GACL8B,MAAM1B,GACTW,GAAcJ,KACbA,GACHgB,YAAW,KACT5B,EAAIW,UAAW,IACd","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formSubmit = document.querySelector('.form');\nconst delay = document.querySelector('input[name=delay]');\nconst step = document.querySelector('input[name=step]');\nconst amount = document.querySelector('input[name=amount]');\nconst btn = document.querySelector('button');\n\nformSubmit.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n  btn.disabled = true;\n  const delayStep = Number(step.value);\n  let position = 0;\n  let delayValue = Number(delay.value);\n  let firstDelay = Number(delay.value);\n\n  const intervalId = setInterval(() => {\n    position += 1;\n\n    if (amount.value < position) {\n      clearInterval(intervalId);\n      return;\n    }\n\n    createPromise(position, delayValue, firstDelay)\n      .then(onMakeFulfilled)\n      .catch(onMakeRejected);\n    delayValue += delayStep;\n  }, delayStep);\n  setTimeout(() => {\n    btn.disabled = false;\n  }, 5000);\n}\n\nfunction createPromise(position, delay, firstDelay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n        reject(`❌ Rejected promise ${position} in ${delay}ms`);\n      }\n    }, firstDelay);\n  });\n}\n\nfunction onMakeFulfilled(result) {\n  // console.log(result);\n  Notify.success(result);\n}\nfunction onMakeRejected(error) {\n  // console.log(error);\n  Notify.failure(error);\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$formSubmit","document","querySelector","$47d4ff9957288465$var$delay","$47d4ff9957288465$var$step","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$btn","$47d4ff9957288465$var$onMakeFulfilled","result","Notify","success","$47d4ff9957288465$var$onMakeRejected","error","failure","addEventListener","event","preventDefault","disabled","delayStep","Number","value","position","delayValue","firstDelay","intervalId","setInterval","clearInterval","delay1","shouldResolve","Math","random","Promise","resolve","reject","setTimeout","$47d4ff9957288465$var$createPromise","then","catch"],"version":3,"file":"03-promises.4e9d3dad.js.map"}